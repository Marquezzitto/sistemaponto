<!DOCTYPE html>
<html lang="pt-br">
<head>
    <title>Teste de Conex√£o Firebase</title>
</head>
<body style="font-family: sans-serif; padding: 20px;">
    <h1>Teste de Conex√£o com Firebase</h1>
    <p>Abra o console (F12) para ver as mensagens detalhadas.</p>
    <p id="status" style="font-weight: bold; font-size: 1.2em;">Iniciando teste...</p>

    <script type="module">
        // Importa o banco de dados da sua configura√ß√£o existente
        import { db } from './firebase-config.js'; 
        // Importa apenas as fun√ß√µes que precisamos para o teste
        import { collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-firestore.js";

        async function testarConexao() {
            const statusEl = document.getElementById('status');
            try {
                console.log("Tentando se conectar ao Firebase...");
                statusEl.textContent = "Tentando escrever no banco de dados...";

                // Tenta escrever um documento em uma cole√ß√£o de teste
                const docRef = await addDoc(collection(db, "testesDeConexao"), {
                    mensagem: "A conexao funcionou!",
                    horario: serverTimestamp()
                });

                console.log("SUCESSO! Documento escrito com ID: ", docRef.id);
                statusEl.textContent = "‚úÖ SUCESSO! A conex√£o com o Firebase est√° funcionando!";
                statusEl.style.color = 'green';

            } catch (error) {
                console.error("üö® FALHA NA CONEX√ÉO:", error);
                statusEl.textContent = "‚ùå FALHA! A conex√£o com o Firebase n√£o funcionou. Verifique o console para o erro detalhado.";
                statusEl.style.color = 'red';
            }
        }

        // Executa o teste assim que a p√°gina carrega
        testarConexao();
    </script>
</body>
</html>